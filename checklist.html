<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöê ÊàøËΩ¶Áâ©ÂìÅÊ∏ÖÂçï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            padding: 20px 0;
        }
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .progress-bar {
            background: rgba(255,255,255,0.3);
            border-radius: 20px;
            height: 20px;
            margin: 15px 0;
            overflow: hidden;
        }
        .progress-fill {
            background: linear-gradient(90deg, #43e97b, #38f9d7);
            height: 100%;
            border-radius: 20px;
            transition: width 0.3s ease;
        }
        .progress-text {
            color: white;
            font-size: 0.9em;
        }
        .category {
            background: white;
            border-radius: 15px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        .category-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }
        .category-header:hover {
            background: #f8f9fa;
        }
        .category-header h2 {
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .category-count {
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85em;
        }
        .category-count.complete {
            background: #43e97b;
        }
        .toggle-icon {
            font-size: 1.2em;
            transition: transform 0.3s;
        }
        .category.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }
        .category.collapsed .category-content {
            display: none;
        }
        .category-content {
            padding: 0 20px 15px 20px;
        }
        .subcategory {
            margin-top: 15px;
        }
        .subcategory h3 {
            font-size: 0.9em;
            color: #888;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        .item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
            gap: 12px;
        }
        .item:last-child {
            border-bottom: none;
        }
        .item input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #667eea;
        }
        .item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95em;
        }
        .item.checked label {
            text-decoration: line-through;
            color: #aaa;
        }
        .item .delete-btn {
            background: none;
            border: none;
            color: #ddd;
            cursor: pointer;
            font-size: 1.2em;
            padding: 5px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .item:hover .delete-btn {
            opacity: 1;
        }
        .item .delete-btn:hover {
            color: #f5576c;
        }
        .add-item {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #ddd;
        }
        .add-item input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #eee;
            border-radius: 10px;
            font-size: 0.9em;
            outline: none;
        }
        .add-item input:focus {
            border-color: #667eea;
        }
        .add-item button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9em;
        }
        .add-item button:hover {
            opacity: 0.9;
        }
        .actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .actions button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9em;
        }
        .btn-reset {
            background: white;
            color: #667eea;
        }
        .btn-clear-checked {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        .footer {
            text-align: center;
            color: white;
            padding: 20px;
            opacity: 0.7;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöê ÊàøËΩ¶Áâ©ÂìÅÊ∏ÖÂçï</h1>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text"><span id="checkedCount">0</span> / <span id="totalCount">0</span> Â∑≤ÂÆåÊàê</div>
        </div>

        <div class="actions">
            <button class="btn-reset" onclick="resetAll()">üîÑ ÈáçÁΩÆÂÖ®ÈÉ®</button>
            <button class="btn-clear-checked" onclick="clearChecked()">üóëÔ∏è Ê∏ÖÈô§Â∑≤ÂãæÈÄâ</button>
        </div>

        <div id="categories"></div>

        <div class="footer">
            Êï∞ÊçÆËá™Âä®‰øùÂ≠òÂú®Êú¨Âú∞<br>
            2026Êò•ËäÇÊàøËΩ¶Ë°åÁ®ãÈÖçÂ•óÊ∏ÖÂçï
        </div>
    </div>

    <script>
        // ÂàùÂßãÊï∞ÊçÆ
        const initialData = {
            "üçú È£üÁâ©": {
                "‰∏ªÈ£ü/Âπ≤Á≤Æ": [
                    "Êñπ‰æøÈù¢/Ëá™ÁÉ≠Á±≥È•≠ √ó10",
                    "Èù¢ÂåÖ/ËõãÁ≥ï",
                    "È•ºÂπ≤ √óÂ§öÂåÖ",
                    "ÂÖ´ÂÆùÁ≤• √ó6ÁΩê"
                ],
                "Èõ∂È£üÔºàÂ≠©Â≠êÔºâ": [
                    "Â∞èÈ¶íÂ§¥„ÄÅÊ∫∂Ë±Ü",
                    "ÊûúÊ≥•„ÄÅËÇâÊ≥•Ôºà2Â≤ÅÔºâ",
                    "Â•∂ÈÖ™Ê£í",
                    "Ê∞¥ÊûúÊù°/ÊûúÂπ≤",
                    "Â∞èÈ•ºÂπ≤ÂàÜË£ÖÂåÖ"
                ],
                "È•ÆÂìÅ": [
                    "ÁüøÊ≥âÊ∞¥ √ó2ÁÆ±",
                    "ÁâõÂ•∂/Â•∂Á≤â",
                    "‰øùÊ∏©Â£∂ √ó2",
                    "ÂßúËå∂ÂåÖ"
                ]
            },
            "üç≥ ÂÅöÈ•≠/Âé®Êàø": {
                "ÈîÖÂÖ∑": [
                    "ÁîµÁÅ´ÈîÖ/Â§öÂäüËÉΩÈîÖ",
                    "Â∞èÁÇíÈîÖ/Âπ≥Â∫ïÈîÖ",
                    "Â∞èÂ•∂ÈîÖÔºàÁÖÆÁ≤•„ÄÅÁÉ≠Â•∂Ôºâ",
                    "ÁîµÈ•≠ÁÖ≤ÔºàÂ∞èÂûãÔºâ"
                ],
                "ÁÇâÂÖ∑": [
                    "Âç°ÂºèÁÇâ",
                    "Ê∞îÁΩê √ó4-6ÁΩê",
                    "Èò≤È£éÊùø"
                ],
                "È§êÂÖ∑": [
                    "Á¢ó √ó6",
                    "ÁõòÂ≠ê √ó4",
                    "Á≠∑Â≠ê √ó6Âèå",
                    "Âã∫Â≠ê √ó6",
                    "ÂèâÂ≠ê √ó4",
                    "ÂÑøÁ´•È§êÂÖ∑Ôºà2Â≤ÅÔºâ",
                    "Ê∞¥ÊûúÂàÄ + Á†ßÊùø",
                    "Ââ™ÂàÄ",
                    "ÂºÄÁì∂Âô®"
                ],
                "ÁÉπÈ•™Â∑•ÂÖ∑": [
                    "ÈîÖÈì≤",
                    "Ê±§Âã∫",
                    "ÊºèÂã∫",
                    "È£üÂìÅÂ§π"
                ],
                "Ë∞ÉÂë≥Êñô": [
                    "Áõê",
                    "ÈÖ±Ê≤πÔºàÂ∞èÁì∂Ôºâ",
                    "ÈÜã",
                    "È£üÁî®Ê≤πÔºàÂ∞èÁì∂Ôºâ",
                    "ÁÅ´ÈîÖÂ∫ïÊñô √ó3ÂåÖ",
                    "Ëò∏ÊñôÔºàËäùÈ∫ªÈÖ±Á≠âÔºâ",
                    "ËÄÅÂπ≤Â¶à",
                    "ËöùÊ≤π/ÁîüÊäΩ"
                ],
                "È£üÊùêÂÇ®Â§á": [
                    "ÊåÇÈù¢/Êñπ‰æøÈù¢",
                    "Á±≥ÔºàÂ∞èË¢ãÔºâ",
                    "È∏°Ëõã",
                    "ÁÅ´ËÖøËÇ†",
                    "Ê¶®Ëèú/Âí∏Ëèú",
                    "ÈÄüÂÜª‰∏∏Â≠ê",
                    "ÂçàÈ§êËÇâÁΩêÂ§¥"
                ],
                "‰øùÈ≤ú/Êî∂Á∫≥": [
                    "‰øùÈ≤úË¢ã",
                    "‰øùÈ≤úËÜú",
                    "ÂØÜÂ∞ÅÁõí √óËã•Âπ≤",
                    "ËΩ¶ËΩΩÂÜ∞ÁÆ±/‰øùÊ∏©ÁÆ±"
                ],
                "Âé®ÊàøÊ∏ÖÊ¥Å": [
                    "Ê¥óÊ¥ÅÁ≤æ",
                    "Ê¥óÁ¢óÂ∏É/Êµ∑Áªµ",
                    "Èí¢‰∏ùÁêÉ",
                    "Âé®ÊàøÁ∫∏Â∑æ"
                ]
            },
            "üè† ‰Ωè": {
                "Â∫äÂìÅ": [
                    "Ë¢´Â≠ê/Áù°Ë¢ã",
                    "ÊûïÂ§¥",
                    "Â∫äÂçï/ÈöîËÑèÁù°Ë¢ã",
                    "ÊØõÊØØ"
                ],
                "Ê¥óÊº±": [
                    "ÁâôÂà∑ÁâôËÜè √ó6",
                    "ÊØõÂ∑æ √ó6",
                    "Êµ¥Â∑æ √ó4",
                    "Ê¥óÂèëÊ∞¥„ÄÅÊ≤êÊµ¥Èú≤",
                    "Êä§ËÇ§ÂìÅ"
                ],
                "2Â≤ÅÂÆùÂÆù‰∏ìÁî®": [
                    "Â∞ø‰∏çÊπø √ó3Â§ßÂåÖ",
                    "ÊπøÂ∑æ √ó5ÂåÖ",
                    "Âπ≤Á∫∏Â∑æ √óÂ§öÂåÖ",
                    "ÂÑøÁ´•È©¨Ê°∂Âúà/‰æøÁõÜ",
                    "Â•∂Áì∂/Ê∞¥ÊùØ",
                    "ËæÖÈ£üÁ¢óÂã∫",
                    "Âõ¥Âò¥ √ó5"
                ],
                "Ê∏ÖÊ¥Å": [
                    "ÂûÉÂúæË¢ã √óÂ§öÂç∑",
                    "Á∫∏Â∑æ„ÄÅÂç∑Á∫∏",
                    "Ê∂àÊØíÊπøÂ∑æ",
                    "ÊäπÂ∏É"
                ],
                "ÁîµÂô®": [
                    "ËΩ¶ËΩΩÁÉßÊ∞¥Â£∂",
                    "ÂÖÖÁîµÂÆù √ó2",
                    "ÂêÑÁßçÂÖÖÁîµÁ∫ø",
                    "ÊâãÁîµÁ≠í"
                ]
            },
            "üöó Ë°å": {
                "ËØÅ‰ª∂": [
                    "Ë∫´‰ªΩËØÅ √ó6",
                    "È©æÁÖß √ó2",
                    "Ë°åÈ©∂ËØÅ",
                    "Âåª‰øùÂç° √ó6"
                ],
                "ÂØºËà™": [
                    "ÊâãÊú∫ÊîØÊû∂",
                    "Á¶ªÁ∫øÂú∞ÂõæÔºàÊèêÂâç‰∏ãËΩΩÔºâ"
                ],
                "ËΩ¶ËæÜÂ∑•ÂÖ∑": [
                    "Êê≠ÁîµÁ∫ø",
                    "ÁÅ≠ÁÅ´Âô®ÔºàÊ£ÄÊü•ÊúâÊïàÊúüÔºâ",
                    "‰∏âËßíË≠¶Á§∫Áâå",
                    "ÂèçÂÖâËÉåÂøÉ"
                ],
                "ÂÑøÁ´•ÂÆâÂÖ®": [
                    "ÂÆâÂÖ®Â∫ßÊ§ÖÔºà2Â≤ÅÔºâ",
                    "Â¢ûÈ´òÂû´Ôºà7Â≤ÅÔºâ",
                    "ËΩ¶Á™óÈÅÆÈò≥Â∏ò"
                ],
                "Â®±‰πê": [
                    "iPad + Âä®ÁîªÁâá",
                    "ÂÑøÁ´•ËÄ≥Êú∫ √ó2",
                    "ÁªòÊú¨ √ó5",
                    "Ë¥¥Á∫∏‰π¶/Ê∂ÇËâ≤‰π¶",
                    "Â∞èÁé©ÂÖ∑"
                ]
            },
            "üíä ÂåªËçØ": {
                "Â∏∏Áî®ËçØ": [
                    "ÈÄÄÁÉßËçØÔºàÁæéÊûóÔºâ",
                    "ÊÑüÂÜíËçØÔºàÂ§ß‰∫∫+ÂÑøÁ´•Ôºâ",
                    "Ê≠¢Ê≥ªËçØÔºàËíôËÑ±Áü≥Êï£Ôºâ",
                    "ÁõäÁîüËèå",
                    "ÊôïËΩ¶ËçØ",
                    "ÂàõÂèØË¥¥",
                    "Á¢ò‰ºèÊ£âÁâá",
                    "‰ΩìÊ∏©ËÆ°"
                ],
                "ËÄÅ‰∫∫Áî®ËçØ": [
                    "Êó•Â∏∏ËçØÁâ©ÔºàÊåâÈúÄÔºâ"
                ],
                "ÂÖ∂‰ªñ": [
                    "Âè£ÁΩ©",
                    "ÂÖçÊ¥óÊ¥óÊâãÊ∂≤"
                ]
            },
            "üì∏ ÂÖ∂‰ªñ": {
                "ÊùÇÈ°π": [
                    "Áõ∏Êú∫/ÂÖÖÁîµÂô®",
                    "Ëá™ÊãçÊùÜ",
                    "Áé∞ÈáëÔºàÂ∞ëÈáèÔºâ",
                    "‰øùÊ∏©ÊùØ √ó4",
                    "ÊäòÂè†Êé®ËΩ¶Ôºà2Â≤ÅÔºâ",
                    "ËÉåÂ∏¶/ËÖ∞Âá≥",
                    "Èõ®‰ºû √ó4",
                    "ÊöñÂÆùÂÆù √ó20Áâá"
                ]
            }
        };

        // ‰ªélocalStorageÂä†ËΩΩÊàñ‰ΩøÁî®ÂàùÂßãÊï∞ÊçÆ
        let data = JSON.parse(localStorage.getItem('rvChecklist')) || {};
        let checkedItems = JSON.parse(localStorage.getItem('rvCheckedItems')) || {};

        // ÂàùÂßãÂåñÊï∞ÊçÆ
        if (Object.keys(data).length === 0) {
            data = JSON.parse(JSON.stringify(initialData));
            saveData();
        }

        function saveData() {
            localStorage.setItem('rvChecklist', JSON.stringify(data));
            localStorage.setItem('rvCheckedItems', JSON.stringify(checkedItems));
        }

        function getItemId(category, subcategory, item) {
            return `${category}-${subcategory}-${item}`.replace(/\s/g, '_');
        }

        function renderCategories() {
            const container = document.getElementById('categories');
            container.innerHTML = '';

            let totalItems = 0;
            let checkedCount = 0;

            for (const [categoryName, subcategories] of Object.entries(data)) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category';

                let categoryTotal = 0;
                let categoryChecked = 0;

                // ËÆ°ÁÆóÂàÜÁ±ªÁªüËÆ°
                for (const [subName, items] of Object.entries(subcategories)) {
                    categoryTotal += items.length;
                    items.forEach(item => {
                        const id = getItemId(categoryName, subName, item);
                        if (checkedItems[id]) categoryChecked++;
                    });
                }

                totalItems += categoryTotal;
                checkedCount += categoryChecked;

                const isComplete = categoryChecked === categoryTotal && categoryTotal > 0;

                categoryDiv.innerHTML = `
                    <div class="category-header" onclick="toggleCategory(this)">
                        <h2>${categoryName}</h2>
                        <div style="display:flex;align-items:center;gap:10px;">
                            <span class="category-count ${isComplete ? 'complete' : ''}">${categoryChecked}/${categoryTotal}</span>
                            <span class="toggle-icon">‚ñº</span>
                        </div>
                    </div>
                    <div class="category-content">
                        ${Object.entries(subcategories).map(([subName, items]) => `
                            <div class="subcategory">
                                <h3>${subName}</h3>
                                ${items.map(item => {
                                    const id = getItemId(categoryName, subName, item);
                                    const isChecked = checkedItems[id];
                                    return `
                                        <div class="item ${isChecked ? 'checked' : ''}">
                                            <input type="checkbox" id="${id}" ${isChecked ? 'checked' : ''} 
                                                onchange="toggleItem('${categoryName}', '${subName}', '${item.replace(/'/g, "\\'")}')">
                                            <label for="${id}">${item}</label>
                                            <button class="delete-btn" onclick="deleteItem('${categoryName}', '${subName}', '${item.replace(/'/g, "\\'")}')">√ó</button>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        `).join('')}
                        <div class="add-item">
                            <input type="text" placeholder="Ê∑ªÂä†Êñ∞Áâ©ÂìÅ..." id="newItem-${categoryName.replace(/\s/g, '_')}" 
                                onkeypress="if(event.key==='Enter')addItem('${categoryName}')">
                            <button onclick="addItem('${categoryName}')">Ê∑ªÂä†</button>
                        </div>
                    </div>
                `;

                container.appendChild(categoryDiv);
            }

            // Êõ¥Êñ∞ËøõÂ∫¶Êù°
            document.getElementById('checkedCount').textContent = checkedCount;
            document.getElementById('totalCount').textContent = totalItems;
            const percentage = totalItems > 0 ? (checkedCount / totalItems * 100) : 0;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function toggleCategory(header) {
            header.parentElement.classList.toggle('collapsed');
        }

        function toggleItem(category, subcategory, item) {
            const id = getItemId(category, subcategory, item);
            checkedItems[id] = !checkedItems[id];
            saveData();
            renderCategories();
        }

        function deleteItem(category, subcategory, item) {
            if (confirm(`Á°ÆÂÆöÂà†Èô§"${item}"ÂêóÔºü`)) {
                const index = data[category][subcategory].indexOf(item);
                if (index > -1) {
                    data[category][subcategory].splice(index, 1);
                    const id = getItemId(category, subcategory, item);
                    delete checkedItems[id];
                    saveData();
                    renderCategories();
                }
            }
        }

        function addItem(category) {
            const inputId = `newItem-${category.replace(/\s/g, '_')}`;
            const input = document.getElementById(inputId);
            const item = input.value.trim();
            
            if (item) {
                // Ê∑ªÂä†Âà∞Á¨¨‰∏Ä‰∏™Â≠êÂàÜÁ±ª
                const firstSubcategory = Object.keys(data[category])[0];
                data[category][firstSubcategory].push(item);
                saveData();
                renderCategories();
                
                // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
                setTimeout(() => {
                    document.getElementById(inputId).value = '';
                }, 0);
            }
        }

        function resetAll() {
            if (confirm('Á°ÆÂÆöÈáçÁΩÆÊâÄÊúâÂãæÈÄâÁä∂ÊÄÅÂêóÔºü')) {
                checkedItems = {};
                saveData();
                renderCategories();
            }
        }

        function clearChecked() {
            if (confirm('Á°ÆÂÆöÊ∏ÖÈô§ÊâÄÊúâÂ∑≤ÂãæÈÄâÁöÑÁâ©ÂìÅÂêóÔºüËøôÂ∞Ü‰ªéÂàóË°®‰∏≠Âà†Èô§ÂÆÉ‰ª¨„ÄÇ')) {
                for (const [category, subcategories] of Object.entries(data)) {
                    for (const [subName, items] of Object.entries(subcategories)) {
                        data[category][subName] = items.filter(item => {
                            const id = getItemId(category, subName, item);
                            return !checkedItems[id];
                        });
                    }
                }
                checkedItems = {};
                saveData();
                renderCategories();
            }
        }

        // ÂàùÂßãÊ∏≤Êüì
        renderCategories();
    </script>
</body>
</html>